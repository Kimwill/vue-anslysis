{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/observe/array.js","../src/observe/dep.js","../src/observe/index.js","../src/state.js","../src/compile/parse.js","../src/compile/generate.js","../src/compile/index.js","../src/observe/scheduler.js","../src/observe/watch.js","../src/vdom/patch.js","../src/lifeCycle.js","../src/init.js","../src/vdom/create-element.js","../src/render.js","../src/global-api/index.js","../src/index.js"],"sourcesContent":["export function isObject(data) {\r\n  return typeof data === 'object' && data !== null\r\n}\r\n\r\nexport function isSameNode(oldNode, newNode) {\r\n  return oldNode.tag === newNode.tag && oldNode.key === newNode.key\r\n}\r\n\r\nconst strats = {}\r\nconst LIFECYCLE_HOOKS = [\r\n  'beforeCreate',\r\n  'created',\r\n  'beforeMount',\r\n  'mounted',\r\n  'beforeUpdate',\r\n  'updated',\r\n  'beforeDestroy',\r\n  'destroyed'\r\n]\r\nfunction mergeHook(parent, child) {\r\n  if (child) {\r\n    if (parent) {\r\n      return parent.concat(child)\r\n    } else {\r\n      return [child]\r\n    }\r\n  } else {\r\n    return parent\r\n  }\r\n}\r\nLIFECYCLE_HOOKS.forEach(hook => {\r\n  strats[hook] = mergeHook\r\n})\r\nexport function mergeOptions(parentVal, childVal) {\r\n  const options = {}\r\n  for (let key in parentVal) {\r\n    mergeField(key)\r\n  }\r\n  for (let key in childVal) {\r\n    if (!parentVal.hasOwnProperty(key)) {\r\n      mergeField(key)\r\n    }\r\n  }\r\n  function mergeField(key) {\r\n    if (strats[key]) {\r\n      options[key] = strats[key](parentVal[key], childVal[key])\r\n    } else {\r\n      if (isObject(parentVal[key]) && isObject(childVal[key])) {\r\n        options[key] = {\r\n          ...parentVal[key],\r\n          ...childVal[key]\r\n        }\r\n      } else {\r\n        options[key] = childVal[key]\r\n      }\r\n    }\r\n  }\r\n  return options\r\n}\r\n","const oldArrayMethods = Array.prototype\r\n\r\nexport const arrayMethods = Object.create(oldArrayMethods)\r\n\r\nconst methods = [\r\n  'push',\r\n  'pop',\r\n  'shift',\r\n  'unshift',\r\n  'sort',\r\n  'reserve',\r\n  'splice'\r\n]\r\n\r\nmethods.forEach(method => {\r\n  // 函数劫持（AOP）\r\n  arrayMethods[method] = function(...args) {\r\n    const ob = this.__ob__\r\n    const result = oldArrayMethods[method].apply(this, args)\r\n    let inserted\r\n    switch(method) {\r\n      case 'push':\r\n      case 'unshift':\r\n        inserted = args\r\n        break\r\n      case 'splice':\r\n        inserted = args.slice(2)\r\n        break\r\n      default:\r\n        break\r\n    }\r\n    inserted && ob.observeArray(inserted)\r\n    return result\r\n  }\r\n})\r\n","let id = 0\r\n\r\nexport default class Dep {\r\n  constructor() {\r\n    this.id = id++\r\n    this.subs = []\r\n  }\r\n  depend() {\r\n    if (Dep.target) {\r\n      Dep.target.addDep(this)\r\n    }\r\n  }\r\n  addSubs(watch) {\r\n    this.subs.push(watch)\r\n  }\r\n  notify() {\r\n    this.subs.forEach(sub => {\r\n      sub.update()\r\n    })\r\n  }\r\n}\r\nlet stack = []\r\nexport function pushTarget(watch) {\r\n  Dep.target = watch\r\n  stack.push(watch)\r\n}\r\n\r\nexport function popTarget(watch) {\r\n  stack.pop()\r\n  Dep.target = stack[stack.length - 1]\r\n}","import { isObject } from '../utils.js'\r\nimport { arrayMethods } from './array.js'\r\nimport Dep from './dep.js'\r\n\r\nclass Observe {\r\n  constructor(data) {\r\n    Object.defineProperty(data, '__ob__', {\r\n      enumerable: false,\r\n      configurable: false,\r\n      value: this\r\n    })\r\n    if (Array.isArray(data)) {\r\n      // 若对数据所有项进行拦截，效率很低\r\n      // 数组是通过对push, unshift, splice等操作数组的方法做拦截实现观测的（改写数组原型链）\r\n      data.__proto__ = arrayMethods // 改写原型链，数组调用方法时会先调用自身重写的方法\r\n      this.observeArray(data)\r\n    } else {\r\n      // 对象用definePorperty的方式做拦截\r\n      this.walk(data)\r\n    }\r\n  }\r\n  observeArray(data) {\r\n    data.forEach(item => {\r\n      observe(item)\r\n    })\r\n  }\r\n  walk(data) {\r\n    let keys = Object.keys(data)\r\n    keys.forEach(key => {\r\n      defineReactive(data, key, data[key])\r\n    })\r\n  }\r\n}\r\n\r\nfunction defineReactive(data, key, value) {\r\n  let dep = new Dep()\r\n  observe(value) // 如果传入的值还是对象，递归观测\r\n  Object.defineProperty(data, key, {\r\n    get() {\r\n      if (Dep.target) {\r\n        dep.depend() // 让watch收集dep，让dep收集watch\r\n      }\r\n      return value\r\n    },\r\n    set(newValue) {\r\n      if (newValue === value) return\r\n      observe(newValue) // 监控当前设置的新值\r\n      value = newValue\r\n      dep.notify()\r\n    }\r\n  })\r\n}\r\n\r\nexport function observe(data) {\r\n  if (!isObject(data)) {\r\n    return\r\n  }\r\n  // 这么写的好处是可以通过判断data是否是Object的实力来确认是否已经观测过\r\n  return new Observe(data)\r\n}","import { observe } from './observe/index.js'\r\n\r\nexport function initState(vm) {\r\n  const opts = vm.$options\r\n  if (opts.props) {\r\n    initProps(vm)\r\n  }\r\n  if (opts.data) {\r\n    ininData(vm)\r\n  }\r\n  if (opts.computed) {\r\n    initComputed(vm)\r\n  }\r\n  if (opts.watch) {\r\n    initWatch(vm)\r\n  }\r\n  if (opts.methods) {\r\n    initMethods(vm)\r\n  }\r\n}\r\n\r\nfunction initProps(vm) {}\r\nfunction proxy(target, property, key) {\r\n  Object.defineProperty(target, key, {\r\n    get() {\r\n      return target[property][key]\r\n    },\r\n    set(newVal) {\r\n      target[property][key] = newVal\r\n    }\r\n  })\r\n}\r\nfunction ininData(vm) {\r\n  let data = vm.$options.data\r\n  // _data代表观测后的data\r\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data\r\n  // 观测数据\r\n  for (let key in data) {\r\n    proxy(vm, '_data', key)\r\n  }\r\n  observe(data)\r\n}\r\nfunction initComputed(vm) {}\r\nfunction initWatch(vm) {}\r\nfunction initMethods(vm) {}\r\n\r\n","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;  \r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\r\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的 >\r\n\r\nexport function parseHTML(html) {\r\n\r\n  let root = null\r\n  let currentParent = null\r\n  let stack = []\r\n\r\n  function createASTElement(tagName, attrs) {\r\n    return {\r\n      tag: tagName,\r\n      type: 1,\r\n      children: [],\r\n      attrs,\r\n      parent: null\r\n    }\r\n  }\r\n\r\n  function start(tagName, attrs) {\r\n    const element = createASTElement(tagName, attrs)\r\n    if (!root) {\r\n      root = element\r\n    }\r\n    currentParent = element\r\n    stack.push(element)\r\n  }\r\n\r\n  function end(tagName) {\r\n    const element = stack.pop()\r\n    currentParent = stack[stack.length - 1]\r\n    if (currentParent) {\r\n      currentParent.children.push(element)\r\n      element.parent = currentParent\r\n    }\r\n  }\r\n\r\n  function chars(text) {\r\n    text = text.trim()\r\n    if (text) {\r\n      currentParent.children.push({\r\n        type: 3,\r\n        text\r\n      })\r\n    }\r\n  }\r\n\r\n  while(html) {\r\n    const textEnd = html.indexOf('<')\r\n    if (textEnd === 0) {\r\n      const startTagMatch = parseStartTag(html)\r\n      if (startTagMatch) {\r\n        // 开始标签\r\n        start(startTagMatch.tag, startTagMatch.attrs)\r\n      }\r\n      const endTagMatch = html.match(endTag)\r\n      if (endTagMatch) {\r\n        advance(endTagMatch[0].length)\r\n        end(endTagMatch[1])\r\n      }\r\n    }\r\n    // 如果不是0，说明是文本\r\n    let text\r\n    if (textEnd > 0) {\r\n      text = html.substring(0, textEnd)\r\n    }\r\n    if (text) {\r\n      advance(text.length)\r\n      chars(text)\r\n    }\r\n  }\r\n\r\n  function advance(n) {\r\n    html = html.substring(n)\r\n  }\r\n\r\n  function parseStartTag() {\r\n    const start = html.match(startTagOpen)\r\n    if (start) {\r\n      const match = {\r\n        tag: start[1],\r\n        attrs: []\r\n      }\r\n      advance(start[0].length)\r\n      let end, attrs\r\n      while (!(end = html.match(startTagClose)) && (attrs = html.match(attribute))) {\r\n        advance(attrs[0].length)\r\n        match.attrs.push({ name: attrs[1], value: attrs[3] || attrs[4] || attrs[5] })\r\n      }\r\n      if (end) {\r\n        advance(end[0].length)\r\n      }\r\n      return match\r\n    }\r\n  }\r\n\r\n  return root\r\n\r\n}\r\n","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\r\n\r\nfunction genProps(attrs) { // style:{color:red;background#fff}\r\n  let attr = ''\r\n  for (let i = 0; i < attrs.length; i++) {\r\n    if (attrs[i].name === 'style') {\r\n      const obj = {}\r\n      attrs[i].value.split(';').forEach(item => {\r\n        const [key, value] = item.split(':')\r\n        obj[key] = value\r\n      })\r\n      attrs[i].value = obj\r\n    }\r\n    attr += `${attrs[i].name}:${JSON.stringify(attrs[i].value)},`\r\n  }\r\n  return `{${attr.slice(0, -1)}}`\r\n}\r\nfunction gen(el) { // hello {{ msg }} aa {{test}}\r\n  if (el.type === 1) {\r\n    return generate(el)\r\n  } else {\r\n    if (!defaultTagRE.test(el.text)) {\r\n      return `_v(${JSON.stringify(el.text)})`\r\n    } else {\r\n      let lastIndex = defaultTagRE.lastIndex = 0\r\n      let match = ''\r\n      let tokens = []\r\n      while (match = defaultTagRE.exec(el.text)) {\r\n        let index = match.index\r\n        if (lastIndex < index) {\r\n          tokens.push(JSON.stringify(el.text.slice(lastIndex, index)))\r\n        }\r\n        tokens.push(`_s(${match[1].trim()})`)\r\n        lastIndex = index + match[0].length\r\n      }\r\n      if (el.text.length > lastIndex) {\r\n        tokens.push(JSON.stringify(el.text.slice(lastIndex)))\r\n      }\r\n      return `_v(${tokens.join('+')})`\r\n    }\r\n  }\r\n}\r\nfunction genChild(node) {\r\n  const children = node.children\r\n  if (!children || children.length === 0) {\r\n    return false\r\n  } else {\r\n    return `${children.map(c => gen(c)).join(',')}`\r\n  }\r\n}\r\nexport function generate(el) {\r\n  const children = genChild(el)\r\n  let code = `_c(\"${el.tag}\",${\r\n    el.attrs.length > 0 ? genProps(el.attrs) : undefined\r\n  }, ${\r\n    children ? children : ''\r\n  })`\r\n  return code\r\n}","import { parseHTML } from './parse.js'\r\nimport { generate } from './generate.js'\r\n\r\nexport function compileToFunctions(template) {\r\n  /*\r\n    模板编译原理\r\n    1、生成ast语法书\r\n    2、标记静态数（提高性能，静态树不做比对）\r\n    3、通过ast语法书生成代码 => render\r\n  */\r\n  let ast = parseHTML(template)\r\n\r\n  // 代码生成 ast => render\r\n  let code = generate(ast)\r\n  code = `with(this) {return ${code}}`\r\n  const render = new Function(code) // 相当于把字符串变成函数\r\n  return render\r\n}","let queue = []\r\nlet has = {}\r\n\r\nfunction flushQueueWatcher() {\r\n  queue.forEach(watcher => {\r\n    watcher.run()\r\n  })\r\n  queue = []\r\n  has = {}\r\n}\r\n\r\nexport function queneWatcher(watcher) {\r\n  const id = watcher.id\r\n  if (!has.id) {\r\n    queue.push(watcher)\r\n    has.id = true\r\n    // setTimeout(flushQueueWatcher, 0)\r\n    nextTick(flushQueueWatcher)\r\n  }\r\n}\r\n\r\nlet pending = false\r\nlet callbacks = []\r\nfunction flushCallbackQueue(fn) {\r\n  callbacks.forEach(fn => fn())\r\n  pending = false\r\n}\r\n\r\nexport function nextTick(fn) {\r\n  callbacks.push(fn)\r\n  if (!pending) {\r\n    setTimeout(flushCallbackQueue, 0)\r\n    pending = true\r\n  }\r\n}","import { pushTarget, popTarget } from \"./dep\"\r\nimport { queneWatcher } from \"./scheduler\"\r\n\r\nlet id = 0\r\n\r\nexport default class Watch {\r\n  constructor(vm, exprOrFn, cb, options) {\r\n    this.vm = vm\r\n    this.id = id++\r\n    this.exprOrFn = exprOrFn\r\n    this.cb = cb\r\n    this.options = options\r\n    this.deps = []\r\n    this.depsId = new Set()\r\n    if (typeof exprOrFn === 'function') [\r\n      this.getter = exprOrFn\r\n    ]\r\n    this.get()\r\n    exprOrFn()\r\n  }\r\n  get() {\r\n    pushTarget(this)\r\n    this.getter()\r\n    popTarget(this)\r\n  }\r\n  update() {\r\n    // Vue采用异步更新策略\r\n    queneWatcher(this)\r\n  }\r\n  run() {\r\n    this.get()\r\n  }\r\n  addDep(dep) {\r\n    if (!this.depsId.has(dep.id)) {\r\n      this.deps.push(dep)\r\n      this.depsId.add(dep.id)\r\n      dep.addSubs(this)\r\n    }\r\n  }\r\n}","import { isSameNode } from \"../utils\"\r\n\r\nexport function patch(oldNode, newNode) {\r\n  const isRealElement = oldNode.nodeType\r\n  if (isRealElement) {\r\n    const oldEle = oldNode\r\n    const parentEle = oldNode.parentNode\r\n    let el = createEle(newNode)\r\n    parentEle.insertBefore(el, oldEle.nextSibling)\r\n    parentEle.removeChild(oldEle)\r\n    return el\r\n  } else {\r\n    // diff\r\n    // 标签名不同，直接用新的替换掉旧的\r\n    if (oldNode.tag !== newNode.tag) {\r\n      oldNode.el.parentNode.replaceChild(createEle(newNode), oldNode.el)\r\n    }\r\n    // 没有标签名，说明是文本节点，直接用新的文本替换旧的文本\r\n    if (!oldNode.tag) {\r\n      if (oldNode.text !== newNode.text) {\r\n        oldNode.el.textContent = newNode.text\r\n      }\r\n    }\r\n    // 标签相同，复用标签并且更新属性\r\n    let el = newNode.el = oldNode.el\r\n    updateProperties(newNode, oldNode.data)\r\n    // 比较孩子节点\r\n    const oldChildren = oldNode.children || []\r\n    const newChildren = newNode.children || []\r\n    if (oldChildren.length > 0 && newChildren.length > 0) {\r\n      // 新老都有孩子\r\n      updateChildren(el, oldChildren, newChildren)\r\n    } else if (oldChildren.length > 0) {\r\n      // 新节点没有孩子老节点有，清空老节点的孩子\r\n      el.innerHTML = ''\r\n    } else if (newChildren.length > 0) {\r\n      // 老节点没有孩子新节点有\r\n      newChildren.forEach(child => {\r\n        el.appendChild(createEle(child))\r\n      })\r\n    }\r\n    return el\r\n  }\r\n}\r\n\r\nfunction makeIndexByKey(children) {\r\n  const map = {}\r\n  children.forEach((child, index) => {\r\n    map[child.key] = index\r\n  })\r\n  return map\r\n}\r\n\r\nfunction updateChildren(parent, oldChildren, newChildren) {\r\n  let oldStartIndex = 0\r\n  let oldEndIndex = oldChildren.length - 1\r\n  let oldStartNode = oldChildren[oldStartIndex]\r\n  let oldEndNode = oldChildren[oldEndIndex]\r\n\r\n  let newStartIndex = 0\r\n  let newEndIndex = newChildren.length - 1\r\n  let newStartNode = newChildren[newStartIndex]\r\n  let newEndNode = newChildren[newEndIndex]\r\n  \r\n  let map = makeIndexByKey(oldChildren)\r\n\r\n  while (oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex) {\r\n    if (!oldChildren[oldStartIndex]) {\r\n      oldStartNode = oldChildren[++oldStartIndex]\r\n    } else if (!oldChildren[oldEndIndex]) {\r\n      oldEndNode = oldChildren[--oldEndIndex]\r\n    } else if (isSameNode(oldStartNode, newStartNode)) {\r\n      // 优化向后追加逻辑\r\n      patch(oldStartNode,newStartNode) // 比对属性， 并且递归比对孩子\r\n      oldStartNode = oldChildren[++oldStartIndex]\r\n      newStartNode = newChildren[++newStartIndex]\r\n    } else if (isSameNode(oldEndNode, newEndNode)) {\r\n      // 优化向前追加逻辑\r\n      patch(oldEndNode, newEndNode)\r\n      oldEndNode = oldChildren[--oldEndIndex]\r\n      newEndNode = newChildren[--newEndIndex]\r\n    } else if (isSameNode(oldStartNode, newEndNode)) {\r\n      // 头移尾\r\n      patch(oldStartNode, newEndNode)\r\n      parent.insertBefore(oldStartNode.el, oldEndNode.el.nextSibling)\r\n      oldStartNode = oldChildren[++oldStartIndex]\r\n      newEndNode = newChildren[--newEndIndex]\r\n    } else if (isSameNode(oldEndNode, newStartNode)) {\r\n      patch(oldEndNode, newStartNode)\r\n      parent.insertBefore(oldEndNode.el, oldStartNode.el)\r\n      oldEndNode = oldChildren[--oldEndIndex]\r\n      newStartNode = newChildren[++newStartIndex]\r\n    } else {\r\n      // 暴力对比\r\n      let moveIndex = map[newStartNode.key]\r\n      if (moveIndex) {\r\n        // 存在，代表新节点中有这个元素，做移动\r\n        let moveNode = oldChildren[moveIndex]\r\n        oldChildren[moveIndex] = null\r\n        patch(moveNode, newStartNode)\r\n        parent.insertBefore(moveNode.el, oldStartNode.el)\r\n      } else {\r\n        // 不存在，需要新建一个元素添加到旧节点中\r\n        parent.insertBefore(createEle(newStartNode), oldStartNode.el)\r\n      }\r\n      newStartNode = newChildren[++newStartIndex]\r\n    }\r\n  }\r\n  // 新children有剩余，说明有新的节点需要加入\r\n  if (newStartIndex <= newEndIndex) {\r\n    for (let i = newStartIndex; i <= newEndIndex; i++) {\r\n      let ele = newChildren[newEndIndex + 1] === undefined ? null : newChildren[newEndIndex + 1].el\r\n      parent.insertBefore(createEle(newChildren[i]), ele)\r\n    }\r\n  }\r\n  // 旧children有剩余，说明新children中没有这些元素，需要删除\r\n  if (oldStartIndex <= oldEndNode) {\r\n    for (let i = oldStartIndex; i <= oldEndIndex; i++) {\r\n      let child = oldChildren[i]\r\n      if (!ele) {\r\n        parent.removeChild(child.el)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function createEle(vnode) {\r\n  const { tag, data, key, children, text } = vnode\r\n  if (typeof tag === 'string') {\r\n    // 标签\r\n    vnode.el = document.createElement(tag)\r\n    updateProperties(vnode)\r\n    children.forEach(child => {\r\n      vnode.el.appendChild(createEle(child))\r\n    })\r\n  } else {\r\n    // 文本\r\n    vnode.el = document.createTextNode(text)\r\n  }\r\n  return vnode.el\r\n}\r\n\r\nfunction updateProperties(newNode, oldProps = {}) {\r\n  const newProps = newNode.data || {}\r\n  const el = newNode.el\r\n  // 遍历旧属性，删除新节点中不存在的属性\r\n  const oldStyle = oldProps.style\r\n  const newStyle = newProps.style\r\n  for (let key in oldStyle) {\r\n    if (!newStyle[key]) {\r\n      el.style[key] = ''\r\n    }\r\n  }\r\n  for (let key in oldProps) {\r\n    if (!newProps[key]) {\r\n      el.removeAttribute(key)\r\n    }\r\n  }\r\n  for (let key in newProps) {\r\n    if (key === 'style') { // {color:red;background:#fff}\r\n      for (let styleName in newProps[key]) {\r\n        el.style[styleName] = newProps[key][styleName]\r\n      }\r\n    } else {\r\n      el.setAttribute(key, newProps[key])\r\n    }\r\n  }\r\n}","import Watch from './observe/watch.js'\r\nimport { patch } from './vdom/patch.js'\r\n\r\nexport function lifeCycleMixin(Vue) {\r\n  Vue.prototype._update = function (vnode) {\r\n    const vm = this\r\n    const preVNode = vm._vnode\r\n    vm._vnode = vnode\r\n    if (preVNode) {\r\n      vm.$el = patch(_vnode, vnode)\r\n    } else {\r\n      vm.$el = patch(vm.$el, vnode)\r\n    }\r\n  }\r\n}\r\n\r\nexport function mountComponent(vm, el) {\r\n  function updateComponent() {\r\n    // _render => 调用otps上的render方法，返回虚拟DOM\r\n    // _update => 将虚拟DOM变为真实DOM\r\n    vm._update(vm._render())\r\n  }\r\n  // 数据变化时，执行updateComponent更新视图\r\n  new Watch(vm, updateComponent, () => {}, true)\r\n}","import { initState } from './state.js'\r\nimport { compileToFunctions } from './compile/index.js'\r\nimport { mountComponent } from './lifeCycle.js'\r\nimport { mergeOptions } from './utils.js'\r\nimport { nextTick } from './observe/scheduler.js'\r\n\r\nexport function initMixin(Vue) {\r\n  Vue.prototype.$nextTick = nextTick\r\n  Vue.prototype._init = function(options) {\r\n    const vm = this\r\n    vm.$options = mergeOptions(vm.constructor.options, options)\r\n    // 初始化状态\r\n    initState(vm)\r\n    // 页面挂载\r\n    if (vm.$options.el) {\r\n      vm.$mount(vm.$options.el)\r\n    }\r\n  }\r\n\r\n  Vue.prototype.$mount = function(el) {\r\n    const vm = this\r\n    const options = vm.$options\r\n    vm.$el = el = document.querySelector(el)\r\n    // 如果options中没有render\r\n    if (!vm.$options.render) {\r\n      let template = options.template\r\n      if (!template && el) {\r\n        template = el.outerHTML\r\n      }\r\n      const render = compileToFunctions(template)\r\n      options.render = render\r\n    }\r\n    mountComponent(vm, el) // 组件挂载流程\r\n  }\r\n}\r\n","export function createElementVNode(tag, data = {}, ...children) {\r\n  let key = data.key\r\n  return vnode(tag, data, key, children)\r\n}\r\n\r\nexport function createTextVNode(text) {\r\n  return vnode(undefined, undefined, undefined, undefined, text)\r\n}\r\n\r\n// 虚拟节点，产生一个对象，用来描述dom结构\r\n// ast树用来描述dom语法\r\nfunction vnode(tag, data, key, children, text) {\r\n  return {\r\n    tag,\r\n    data,\r\n    key,\r\n    children,\r\n    text\r\n  }\r\n}","import { createElementVNode, createTextVNode } from './vdom/create-element.js'\r\n\r\nexport function renderMixin(Vue) {\r\n  Vue.prototype._render = function() {\r\n    const vm = this\r\n    const { render } = vm.$options\r\n    let node = render.call(vm)\r\n\r\n    return node\r\n  }\r\n  Vue.prototype._c = function() {\r\n    return createElementVNode(...arguments)\r\n  }\r\n  Vue.prototype._v = function(text) {\r\n    // 创建文本的虚拟节点\r\n    return createTextVNode(text)\r\n  }\r\n  Vue.prototype._s = function(val) {\r\n    return val ? (typeof val === 'object' ? JSON.stringify(val) : val) : ''\r\n  }\r\n}","import { mergeOptions } from \"../utils\"\r\n\r\nexport function initGlobalAPI(Vue) {\r\n  Vue.options = {}\r\n  Vue.mixin = function(mixin) {\r\n    this.options = mergeOptions(this.options, mixin)\r\n    return this\r\n  }\r\n}","import { initMixin } from './init.js'\r\nimport { renderMixin } from './render.js'\r\nimport { lifeCycleMixin } from './lifeCycle.js'\r\nimport { initGlobalAPI } from './global-api/index.js'\r\n\r\nfunction Vue(options) {\r\n  this._init(options)\r\n}\r\n\r\ninitMixin(Vue)\r\nrenderMixin(Vue)\r\nlifeCycleMixin(Vue)\r\ninitGlobalAPI(Vue)\r\n\r\n\r\n// --------------------------diff------------------------\r\nimport { compileToFunctions } from './compile/index.js'\r\nimport { patch, createEle } from './vdom/patch.js'\r\nlet vm1 = new Vue({data: {name: 'kim'}})\r\nlet render1 = compileToFunctions(`<div>\r\n  <li key=\"A\">A</li>\r\n  <li key=\"B\">B</li>\r\n  <li key=\"C\">C</li>\r\n  <li key=\"D\">D</li>\r\n</div>`)\r\nlet oldVNode = render1.call(vm1)\r\n\r\nlet vm2 = new Vue({data: {name: 'xiao'}})\r\nlet render2 = compileToFunctions(`<div>\r\n  <li key=\"C\">C</li>\r\n  <li key=\"A\">A</li>\r\n  <li key=\"D\">D</li>\r\n  <li key=\"B\">B</li>\r\n  <li key=\"E\">E</li>\r\n</div>`)\r\nlet newVNode = render2.call(vm2)\r\n\r\nlet el = createEle(oldVNode)\r\ndocument.body.appendChild(el)\r\nsetTimeout(() => {\r\n  patch(oldVNode, newVNode)\r\n}, 1000)\r\n\r\nexport default Vue\r\n"],"names":["isObject","data","isSameNode","oldNode","newNode","tag","key","strats","LIFECYCLE_HOOKS","mergeHook","parent","child","concat","forEach","hook","mergeOptions","parentVal","childVal","options","mergeField","hasOwnProperty","oldArrayMethods","Array","prototype","arrayMethods","Object","create","methods","method","ob","__ob__","args","result","apply","inserted","slice","observeArray","id","Dep","subs","target","addDep","watch","push","sub","update","stack","pushTarget","popTarget","pop","length","Observe","defineProperty","enumerable","configurable","value","isArray","__proto__","walk","item","observe","keys","defineReactive","dep","get","depend","set","newValue","notify","initState","vm","opts","$options","props","ininData","computed","proxy","property","newVal","_data","call","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","root","currentParent","createASTElement","tagName","attrs","type","children","start","element","end","chars","text","trim","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","name","defaultTagRE","genProps","attr","i","obj","split","JSON","stringify","gen","el","generate","test","lastIndex","tokens","exec","index","join","genChild","node","map","c","code","undefined","compileToFunctions","template","ast","render","Function","queue","has","flushQueueWatcher","watcher","run","queneWatcher","nextTick","pending","callbacks","flushCallbackQueue","fn","setTimeout","Watch","exprOrFn","cb","deps","depsId","Set","getter","add","addSubs","patch","isRealElement","nodeType","oldEle","parentEle","parentNode","createEle","insertBefore","nextSibling","removeChild","replaceChild","textContent","updateProperties","oldChildren","newChildren","updateChildren","innerHTML","appendChild","makeIndexByKey","oldStartIndex","oldEndIndex","oldStartNode","oldEndNode","newStartIndex","newEndIndex","newStartNode","newEndNode","moveIndex","moveNode","ele","vnode","document","createElement","createTextNode","oldProps","newProps","oldStyle","style","newStyle","removeAttribute","styleName","setAttribute","lifeCycleMixin","Vue","_update","preVNode","_vnode","$el","mountComponent","updateComponent","_render","initMixin","$nextTick","_init","constructor","$mount","querySelector","outerHTML","createElementVNode","createTextVNode","renderMixin","_c","arguments","_v","_s","val","initGlobalAPI","mixin","vm1","render1","oldVNode","vm2","render2","newVNode","body"],"mappings":"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"}